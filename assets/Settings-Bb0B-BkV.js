import{s as m,$ as O,g as Y,a as r,i as s,c,t as i,d as N,b as l,r as d,e as W,f as z,q as w,S as G,h as F,j as E,k as A,l as I,m as x,o as J,u as R}from"./index-wmVoKqK-.js";const M=m.player.legacy?O("canvas"):new OffscreenCanvas(512,512),D=M.getContext("2d",{alpha:!1}),B=document.documentElement.style,y=B.setProperty.bind(B),Q=document.head.children.namedItem("theme-color"),V=matchMedia("(prefers-color-scheme:dark)"),H=(e,a,n)=>`rgb(${e},${a},${n},${.5})`,P=(e,a,n)=>{e/=255,a/=255,n/=255;const t=Math.max(e,a,n),o=t-Math.min(e,a,n),g=o?t===e?(a-n)/o:t===a?2+(n-e)/o:4+(e-a)/o:0,u=60*g<0?60*g+360:60*g,h=100*(o?t<=.5?o/(2*t-o):o/(2-(2*t-o)):0);return`hsl(
    ${Math.floor(u)},
    ${Math.floor(h)}%,
    80%)`};function T(e,a,n){let t=Math.min(e,a,n);return(e+a+n)/t>14&&(e=Math.floor(e/3),a=Math.floor(a/3),n=Math.floor(n/3),t=Math.floor(t/3)),`rgb(${e-t}, ${a-t},${n-t})`}const k={light:{bg:P,onBg:"#fff3",text:"#000b",borderColor:H,shadowColor:"#0002"},dark:{bg:T,onBg:"#fff1",text:"#fffb",borderColor:H,shadowColor:"transparent"},white:{bg:()=>"#fff",onBg:"transparent",text:"#000",borderColor:T,shadowColor:"#0002"},black:{bg:()=>"#000",onBg:"transparent",text:"#fff",borderColor:P,shadowColor:"transparent"}};function q(e){const a=V.matches;Promise.resolve().then(()=>r("theme")||"auto").then(n=>{const t=n==="auto"?a?"dark":"light":n==="auto-hc"?a?"black":"white":n,[o,g,u]=e;y("--bg",k[t].bg(o,g,u)),y("--onBg",k[t].onBg),y("--text",k[t].text),y("--borderColor",k[t].borderColor(o,g,u)),y("--shadowColor",k[t].shadowColor),Q.content=k[t].bg(o,g,u)})}function S(){if(!m.stream.id){q([127,127,127]);return}const e=new Image;e.onload=()=>{const n=e.height,t=e.width,o=Math.floor(Math.min(t,n));M.width=M.height=o;const g=Math.floor((t-o)/2),u=Math.floor((n-o)/2);D.drawImage(e,g,u,o,o,0,0,o,o);const h=D.getImageData(0,0,o,o).data,p=h.length;let v=0,C=0,_=0;for(let $=0;$<p;$+=4)v+=h[$],C+=h[$+1],_+=h[$+2];const L=p/4;v=Math.floor(v/L),C=Math.floor(C/L),_=Math.floor(_/L),q([v,C,_])},e.crossOrigin="";const a=Y(m.stream.id,"mq");e.src!==a&&(e.src=a)}V.addEventListener("change",S);var X=i("<div class=toggleSwitch><label></label><input type=checkbox><span>"),K=i("<span><label></label><select>"),Z=i("<option value=https://flyingdarkfox.netlify.app/>flyingdarkfox"),ee=i("<option value=https://youtube.com>YouTube"),te=i("<option value=https://music.youtube.com/>Youtube Music"),oe=i("<option value=https://flyingfoxdarkdev.netlify.app/>FoxTube"),ne=i("<option value=https://viewtube.io>ViewTube"),ae=i("<option value=eager>Eager"),re=i("<option value=lazy>Lazy"),ie=i("<option value=off>Do not Load"),le=i("<option value=opus>Opus (Recommended)"),se=i("<option value=mp3>MP3"),ce=i("<option value=wav>WAV"),ue=i("<option value=ogg>OGG"),de=i("<div><b id=flyingdarkfoxIconContainer><p>flyingdarkfox "),he=i("<div><b><i class=ri-search-2-line></i><p>Search"),ge=i("<option value=opus>Opus"),me=i("<option value=aac>AAC"),fe=i('<option value="">Any'),pe=i("<div><b><i class=ri-play-large-line></i><p>Playback"),ve=i("<div><b><i class=ri-stack-line></i><p> Library</p></b><p>FlyingDarkFox"),ye=i("<option value=none>None"),ke=i("<option value=0.2rem>Lighter"),be=i("<option value=0.4rem selected>Light"),$e=i("<option value=0.6rem>Heavy"),Se=i("<option value=0.9rem>Heavier"),Ce=i("<optgroup label=Dynamic><option value=auto selected>System</option><option value=light>Light</option><option value=dark>Dark"),_e=i('<optgroup label="High Contrast"><option value=auto-hc>System</option><option value=white>White</option><option value=black>Black'),we=i("<div><b><i class=ri-t-shirt-2-line></i><p>Interface</p></b><p>Toggle Fullscreen");function f(e){let a;return(()=>{var n=X(),t=n.firstChild,o=t.nextSibling,g=o.nextSibling;s(t,()=>e.name),A(o,"click",e.onClick,!0);var u=a;return typeof u=="function"?R(u,o):a=o,g.$$click=()=>a.click(),I(h=>{var p=e.id,v=e.id;return p!==h.e&&x(t,"for",h.e=p),v!==h.t&&x(o,"id",h.t=v),h},{e:void 0,t:void 0}),I(()=>o.checked=e.checked),n})()}function b(e){let a;return J(()=>e.onMount(a)),(()=>{var n=K(),t=n.firstChild,o=t.nextSibling;s(t,()=>e.label);var g=a;return typeof g=="function"?R(g,o):a=o,A(o,"change",e.onChange),s(o,()=>e.children),I(u=>{var h=e.id,p=e.id;return h!==u.e&&x(t,"for",u.e=h),p!==u.t&&x(o,"id",u.t=p),u},{e:void 0,t:void 0}),n})()}function Fe(){return[(()=>{var e=de(),a=e.firstChild,n=a.firstChild;return n.firstChild,s(n,"1.2 (6 Oct 2024)",null),s(e,c(f,{id:"customInstanceSwitch",name:"Use Custom Instance",get checked(){return!!r("custom_instance_2")},onClick:()=>{if(r("custom_instance_2"))d("custom_instance_2");else{const t=prompt("Enter Youtube API URL :","https://youtube.com"),o=prompt("Enter FlyingDarkFox API URL :","https://flyingdarkfox.netlify.app/");t&&o&&l("custom_instance_2",t+","+o)}location.reload()}}),null),s(e,c(b,{id:"linkHost",label:"Links Host",onChange:t=>{t.target.selectedIndex===0?d("linkHost"):l("linkHost",t.target.value),location.reload()},onMount:t=>{const o=r("linkHost");o&&(t.value=o)},get children(){return[Z(),ee(),te(),oe(),ne()]}}),null),s(e,c(b,{label:"Image Loading",id:"imgLoad",onChange:t=>{const o=t.target.value;o==="eager"?d("imgLoad"):l("imgLoad",o),location.reload()},onMount:t=>{location.pathname!=="/"&&S();const o=r("imgLoad");o&&(t.value=o),t.value==="off"?(W.remove(),S()):z.addEventListener("loadstart",S)},get children(){return[ae(),re(),ie()]}}),null),s(e,c(b,{id:"downloadFormatSelector",label:"Download Format",onChange:t=>{m.downloadFormat=t.target.value,m.downloadFormat==="opus"?d("dlFormat"):l("dlFormat",m.downloadFormat)},onMount:t=>{const o=r("dlFormat");o&&(t.value=m.downloadFormat=o)},get children(){return[le(),se(),ce(),ue()]}}),null),e})(),(()=>{var e=he();return e.firstChild,s(e,c(f,{id:"defaultFilterSongs",name:"Set Songs as Default Filter",get checked(){return r("searchFilter")==="music_songs"},onClick:()=>{r("searchFilter")?d("searchFilter"):l("searchFilter","music_songs"),location.assign("/search")}}),null),s(e,c(f,{id:"suggestionsSwitch",name:"Display Suggestions",get checked(){return r("searchSuggestions")!=="off"},onClick:()=>{r("searchSuggestions")?d("searchSuggestions"):l("searchSuggestions","off"),location.reload()}}),null),e})(),(()=>{var e=pe();return e.firstChild,s(e,c(f,{id:"qualitySwitch",name:"Highest Quality Audio",get checked(){return r("hq")==="true"},onClick:async()=>{r("hq")?d("hq"):l("hq","true"),m.player.hq=!m.player.hq,w()}}),null),s(e,c(G,{get when(){return!r("HLS")},get children(){return[c(b,{label:"Codec Preference",id:"codecPreference",onChange:async a=>{const n=a.target.selectedIndex;n?l("codec",String(n)):d("codec"),m.player.codec=a.target.value,w()},onMount:async a=>{const n=r("codec");a.selectedIndex=n?parseInt(n):await m.player.supportsOpus?0:1,m.player.codec=a.value},get children(){return[ge(),me(),fe()]}}),c(f,{id:"enforceProxySwitch",name:"Proxy non-music streams",get checked(){return r("enforceProxy")==="true"},onClick:()=>{r("enforceProxy")?d("enforceProxy"):l("enforceProxy","true"),w()}}),c(f,{id:"useInvidiousProxySwitch",name:"Proxy Audio over Invidious",get checked(){return!r("proxyViaInvidious")},onClick:()=>{r("proxyViaInvidious")?d("proxyViaInvidious"):l("proxyViaInvidious","false"),w()}})]}}),null),s(e,c(f,{id:"HLS_Switch",name:"HTTP Live Streaming",get checked(){return r("HLS")==="true"},onClick:()=>{r("HLS")?d("HLS"):l("HLS","true"),location.reload()}}),null),e})(),(()=>{var e=ve(),a=e.firstChild,n=a.nextSibling;return s(e,c(f,{id:"startupTab",name:"Set as Default Tab",get checked(){return r("startupTab")==="/library"},onClick:()=>{r("startupTab")?d("startupTab"):l("startupTab","/library")}}),n),s(e,c(f,{id:"discoverSwitch",name:"Store Discoveries",get checked(){return r("discover")!=="off"},onClick:t=>{if(t.target.checked)d("discover");else{const o=F();confirm(`This will clear your existing ${Object.keys(o.discover||{}).length||0} discoveries, continue?`)?(delete o.discover,E(o),l("discover","off")):t.preventDefault()}}}),n),s(e,c(f,{id:"historySwitch",name:"Store History",get checked(){return r("history")!=="off"},onClick:t=>{if(t.target.checked)d("history");else{const o=F();confirm(`This will clear ${Object.keys(o.history||{}).length||0} items from your history, continue?`)?(delete o.history,E(o),l("history","off")):t.preventDefault()}}}),n),n.$$click=()=>{window.open("https://gauravkumaryadav.great-site.net/","_blank")},e})(),(()=>{var e=we(),a=e.firstChild,n=a.nextSibling;return s(e,c(b,{label:"Roundness",id:"roundnessChanger",onChange:t=>{y("--roundness",t.target.value),t.target.value==="0.4rem"?d("roundness"):l("roundness",t.target.value)},onMount:t=>{r("roundness")&&(t.value=r("roundness")||"0.4rem",y("--roundness",t.value))},get children(){return[ye(),ke(),be(),$e(),Se()]}}),n),s(e,c(b,{label:"Theming Scheme",id:"themeSelector",onChange:t=>{S(),t.target.value==="auto"?d("theme"):l("theme",t.target.value)},onMount:t=>{t.value=r("theme")||"auto"},get children(){return[Ce(),_e()]}}),n),n.$$click=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},e})()]}function j(){self.caches.keys().then(e=>{e.forEach(a=>{self.caches.delete(a)})}),navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(a=>{a.unregister()})}),location.reload()}function U(){const e=r("library");localStorage.clear(),e&&l("library",e),location.reload()}function xe(){const e={},a=localStorage.length;for(let n=0;n<a;n++){const t=localStorage.key(n);t!=="library"&&(e[t]=r(t))}return e}function Le(){const e=O("a");e.download="flyingdarkfox_settings.json",e.href=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(xe(),void 0,2))}`,e.click()}async function Ie(e){e.preventDefault();const a=JSON.parse(await e.target.files[0].text());if(confirm("This will merge your current settings with the imported settings, continue?")){for(const n in a)l(n,a[n]);location.reload()}}location.search==="?reset"&&(history.replaceState({},"",location.pathname),j(),U());document.getElementById("clearCacheBtn").addEventListener("click",j);document.getElementById("restoreSettingsBtn").addEventListener("click",U);document.getElementById("exportSettingsBtn").addEventListener("click",Le);document.getElementById("importSettingsBtn").addEventListener("change",Ie);N(["click"]);export{Fe as default};
