import{O as e,P as t,Q as c,_ as u,f as m,e as p}from"./index-BvXPlkwh.js";function T(i){var o;if(e.classList.remove("hide"),e.innerHTML="<option>Subtitles</option>",t.innerHTML="",i.length)for(const s of i)e.add(new Option(s.name,s.url));else c.src="",t.classList.add("hide"),e.classList.add("hide"),(o=t.firstChild)==null||o.remove()}async function y(){const i=await u(()=>import("./imsc.all.min-B7x7tHTt.js").then(n=>n.i),[]),o=m.textTracks[0];o.mode="hidden";const s=p.getBoundingClientRect();t.style.top=Math.floor(s.y)+"px",t.style.left=Math.floor(s.x)+"px",e.parentElement.style.position="static",e.style.top=Math.floor(s.y)+"px",e.style.left=Math.floor(s.x)+"px",fetch(c.src).then(n=>n.text()).then(n=>{const h=i.fromXML(n),d=h.getMediaTimeEvents(),f=d.length;for(let l=0;l<f;l++){const a=new VTTCue(d[l],l<f-1?d[l+1]:m.duration,"");a.onenter=()=>{const r=t.firstChild;r&&t.removeChild(r),i.renderHTML(i.generateISD(h,a.startTime),t,p,Math.floor(s.height),Math.floor(s.width))},a.onexit=()=>{const r=t.firstChild;r&&t.removeChild(r)},o.addCue(a)}})}e.addEventListener("change",()=>{c.src=e.value,e.selectedIndex>0?(t.classList.remove("hide"),y()):(t.classList.add("hide"),t.style.top="0",t.style.left="0",e.parentElement.style.position="relative",e.style.top="0",e.style.left="0")});export{T as setSubtitles};
