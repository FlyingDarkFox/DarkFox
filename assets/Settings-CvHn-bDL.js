import{s as m,$ as O,g as Y,a as l,i as s,c,t as r,d as G,b as i,r as d,e as N,f as W,q as x,S as z,h as F,j as D,k as A,l as I,m as w,o as J,u as R}from"./index-BvXPlkwh.js";const M=m.player.legacy?O("canvas"):new OffscreenCanvas(512,512),E=M.getContext("2d",{alpha:!1}),B=document.documentElement.style,y=B.setProperty.bind(B),Q=document.head.children.namedItem("theme-color"),V=matchMedia("(prefers-color-scheme:dark)"),P=(e,a,n)=>`rgb(${e},${a},${n},${.5})`,H=(e,a,n)=>{e/=255,a/=255,n/=255;const t=Math.max(e,a,n),o=t-Math.min(e,a,n),g=o?t===e?(a-n)/o:t===a?2+(n-e)/o:4+(e-a)/o:0,u=60*g<0?60*g+360:60*g,h=100*(o?t<=.5?o/(2*t-o):o/(2-(2*t-o)):0);return`hsl(
    ${Math.floor(u)},
    ${Math.floor(h)}%,
    80%)`};function T(e,a,n){let t=Math.min(e,a,n);return(e+a+n)/t>14&&(e=Math.floor(e/3),a=Math.floor(a/3),n=Math.floor(n/3),t=Math.floor(t/3)),`rgb(${e-t}, ${a-t},${n-t})`}const k={light:{bg:H,onBg:"#fff3",text:"#000b",borderColor:P,shadowColor:"#0002"},dark:{bg:T,onBg:"#fff1",text:"#fffb",borderColor:P,shadowColor:"transparent"},white:{bg:()=>"#fff",onBg:"transparent",text:"#000",borderColor:T,shadowColor:"#0002"},black:{bg:()=>"#000",onBg:"transparent",text:"#fff",borderColor:H,shadowColor:"transparent"}};function q(e){const a=V.matches;Promise.resolve().then(()=>l("theme")||"auto").then(n=>{const t=n==="auto"?a?"dark":"light":n==="auto-hc"?a?"black":"white":n,[o,g,u]=e;y("--bg",k[t].bg(o,g,u)),y("--onBg",k[t].onBg),y("--text",k[t].text),y("--borderColor",k[t].borderColor(o,g,u)),y("--shadowColor",k[t].shadowColor),Q.content=k[t].bg(o,g,u)})}function S(){if(!m.stream.id){q([127,127,127]);return}const e=new Image;e.onload=()=>{const n=e.height,t=e.width,o=Math.floor(Math.min(t,n));M.width=M.height=o;const g=Math.floor((t-o)/2),u=Math.floor((n-o)/2);E.drawImage(e,g,u,o,o,0,0,o,o);const h=E.getImageData(0,0,o,o).data,p=h.length;let v=0,C=0,_=0;for(let $=0;$<p;$+=4)v+=h[$],C+=h[$+1],_+=h[$+2];const L=p/4;v=Math.floor(v/L),C=Math.floor(C/L),_=Math.floor(_/L),q([v,C,_])},e.crossOrigin="";const a=Y(m.stream.id,"mq");e.src!==a&&(e.src=a)}V.addEventListener("change",S);var X=r("<div class=toggleSwitch><label></label><input type=checkbox><span>"),K=r("<span><label></label><select>"),Z=r("<option value=https://flyingdarkfox.netlify.app/>flyingdarkfox"),ee=r("<option value=https://youtube.com>YouTube"),te=r("<option value=https://music.youtube.com/>Youtube Music"),oe=r("<option value=https://flyingfoxdarkdev.netlify.app/>FoxTube"),ne=r("<option value=https://viewtube.io>ViewTube"),ae=r("<option value=eager>Eager"),re=r("<option value=lazy>Lazy"),le=r("<option value=off>Do not Load"),ie=r("<option value=opus>Opus (Recommended)"),se=r("<option value=mp3>MP3"),ce=r("<option value=wav>WAV"),ue=r("<option value=ogg>OGG"),de=r("<div><b id=flyingdarkfoxIconContainer><p>flyingdarkfox "),he=r("<div><b><i class=ri-search-2-line></i><p>Search"),ge=r("<option value=opus>Opus"),me=r("<option value=aac>AAC"),fe=r('<option value="">Any'),pe=r("<div><b><i class=ri-play-large-line></i><p>Playback"),ve=r("<div><b><i class=ri-stack-line></i><p> Library</p></b><p>FlyingDarkFox"),ye=r("<option value=none>None"),ke=r("<option value=0.2rem>Lighter"),be=r("<option value=0.4rem selected>Light"),$e=r("<option value=0.6rem>Heavy"),Se=r("<option value=0.9rem>Heavier"),Ce=r("<optgroup label=Dynamic><option value=auto selected>System</option><option value=light>Light</option><option value=dark>Dark"),_e=r('<optgroup label="High Contrast"><option value=auto-hc>System</option><option value=white>White</option><option value=black>Black'),xe=r("<div><b><i class=ri-t-shirt-2-line></i><p>Interface</p></b><p>Toggle Fullscreen"),we=r('<a href=https://gauravkumaryadav.great-site.net/ target=_blank rel="noopener noreferrer">Â©FlyingDarkfox By Gaurav kumar yadav');function f(e){let a;return(()=>{var n=X(),t=n.firstChild,o=t.nextSibling,g=o.nextSibling;s(t,()=>e.name),A(o,"click",e.onClick,!0);var u=a;return typeof u=="function"?R(u,o):a=o,g.$$click=()=>a.click(),I(h=>{var p=e.id,v=e.id;return p!==h.e&&w(t,"for",h.e=p),v!==h.t&&w(o,"id",h.t=v),h},{e:void 0,t:void 0}),I(()=>o.checked=e.checked),n})()}function b(e){let a;return J(()=>e.onMount(a)),(()=>{var n=K(),t=n.firstChild,o=t.nextSibling;s(t,()=>e.label);var g=a;return typeof g=="function"?R(g,o):a=o,A(o,"change",e.onChange),s(o,()=>e.children),I(u=>{var h=e.id,p=e.id;return h!==u.e&&w(t,"for",u.e=h),p!==u.t&&w(o,"id",u.t=p),u},{e:void 0,t:void 0}),n})()}function De(){return[(()=>{var e=de(),a=e.firstChild,n=a.firstChild;return n.firstChild,s(n,"1.2 (6 Oct 2024)",null),s(e,c(f,{id:"customInstanceSwitch",name:"Use Custom Instance",get checked(){return!!l("custom_instance_2")},onClick:()=>{if(l("custom_instance_2"))d("custom_instance_2");else{const t=prompt("Enter Youtube API URL :","https://youtube.com"),o=prompt("Enter FlyingDarkFox API URL :","https://flyingdarkfox.netlify.app/");t&&o&&i("custom_instance_2",t+","+o)}location.reload()}}),null),s(e,c(b,{id:"linkHost",label:"Links Host",onChange:t=>{t.target.selectedIndex===0?d("linkHost"):i("linkHost",t.target.value),location.reload()},onMount:t=>{const o=l("linkHost");o&&(t.value=o)},get children(){return[Z(),ee(),te(),oe(),ne()]}}),null),s(e,c(b,{label:"Image Loading",id:"imgLoad",onChange:t=>{const o=t.target.value;o==="eager"?d("imgLoad"):i("imgLoad",o),location.reload()},onMount:t=>{location.pathname!=="/"&&S();const o=l("imgLoad");o&&(t.value=o),t.value==="off"?(N.remove(),S()):W.addEventListener("loadstart",S)},get children(){return[ae(),re(),le()]}}),null),s(e,c(b,{id:"downloadFormatSelector",label:"Download Format",onChange:t=>{m.downloadFormat=t.target.value,m.downloadFormat==="opus"?d("dlFormat"):i("dlFormat",m.downloadFormat)},onMount:t=>{const o=l("dlFormat");o&&(t.value=m.downloadFormat=o)},get children(){return[ie(),se(),ce(),ue()]}}),null),e})(),(()=>{var e=he();return e.firstChild,s(e,c(f,{id:"defaultFilterSongs",name:"Set Songs as Default Filter",get checked(){return l("searchFilter")==="music_songs"},onClick:()=>{l("searchFilter")?d("searchFilter"):i("searchFilter","music_songs"),location.assign("/search")}}),null),s(e,c(f,{id:"suggestionsSwitch",name:"Display Suggestions",get checked(){return l("searchSuggestions")!=="off"},onClick:()=>{l("searchSuggestions")?d("searchSuggestions"):i("searchSuggestions","off"),location.reload()}}),null),e})(),(()=>{var e=pe();return e.firstChild,s(e,c(f,{id:"qualitySwitch",name:"Highest Quality Audio",get checked(){return l("hq")==="true"},onClick:async()=>{l("hq")?d("hq"):i("hq","true"),m.player.hq=!m.player.hq,x()}}),null),s(e,c(z,{get when(){return!l("HLS")},get children(){return[c(b,{label:"Codec Preference",id:"codecPreference",onChange:async a=>{const n=a.target.selectedIndex;n?i("codec",String(n)):d("codec"),m.player.codec=a.target.value,x()},onMount:async a=>{const n=l("codec");a.selectedIndex=n?parseInt(n):await m.player.supportsOpus?0:1,m.player.codec=a.value},get children(){return[ge(),me(),fe()]}}),c(f,{id:"enforceProxySwitch",name:"Proxy non-music streams",get checked(){return l("enforceProxy")==="true"},onClick:()=>{l("enforceProxy")?d("enforceProxy"):i("enforceProxy","true"),x()}}),c(f,{id:"useInvidiousProxySwitch",name:"Proxy Audio over Invidious",get checked(){return!l("proxyViaInvidious")},onClick:()=>{l("proxyViaInvidious")?d("proxyViaInvidious"):i("proxyViaInvidious","false"),x()}})]}}),null),s(e,c(f,{id:"HLS_Switch",name:"HTTP Live Streaming",get checked(){return l("HLS")==="true"},onClick:()=>{l("HLS")?d("HLS"):i("HLS","true"),location.reload()}}),null),e})(),(()=>{var e=ve(),a=e.firstChild,n=a.nextSibling;return s(e,c(f,{id:"startupTab",name:"Set as Default Tab",get checked(){return l("startupTab")==="/library"},onClick:()=>{l("startupTab")?d("startupTab"):i("startupTab","/library")}}),n),s(e,c(f,{id:"discoverSwitch",name:"Store Discoveries",get checked(){return l("discover")!=="off"},onClick:t=>{if(t.target.checked)d("discover");else{const o=F();confirm(`This will clear your existing ${Object.keys(o.discover||{}).length||0} discoveries, continue?`)?(delete o.discover,D(o),i("discover","off")):t.preventDefault()}}}),n),s(e,c(f,{id:"historySwitch",name:"Store History",get checked(){return l("history")!=="off"},onClick:t=>{if(t.target.checked)d("history");else{const o=F();confirm(`This will clear ${Object.keys(o.history||{}).length||0} items from your history, continue?`)?(delete o.history,D(o),i("history","off")):t.preventDefault()}}}),n),n.$$click=()=>{window.open("https://gauravkumaryadav.great-site.net/","_blank")},e})(),(()=>{var e=xe(),a=e.firstChild,n=a.nextSibling;return s(e,c(b,{label:"Roundness",id:"roundnessChanger",onChange:t=>{y("--roundness",t.target.value),t.target.value==="0.4rem"?d("roundness"):i("roundness",t.target.value)},onMount:t=>{l("roundness")&&(t.value=l("roundness")||"0.4rem",y("--roundness",t.value))},get children(){return[ye(),ke(),be(),$e(),Se()]}}),n),s(e,c(b,{label:"Theming Scheme",id:"themeSelector",onChange:t=>{S(),t.target.value==="auto"?d("theme"):i("theme",t.target.value)},onMount:t=>{t.value=l("theme")||"auto"},get children(){return[Ce(),_e()]}}),n),n.$$click=()=>{document.fullscreenElement?document.exitFullscreen():document.documentElement.requestFullscreen()},e})(),(()=>{var e=we();return e.style.setProperty("text-align","center"),e.style.setProperty("margin-top","20px"),e})()]}function j(){self.caches.keys().then(e=>{e.forEach(a=>{self.caches.delete(a)})}),navigator.serviceWorker.getRegistrations().then(e=>{e.forEach(a=>{a.unregister()})}),location.reload()}function U(){const e=l("library");localStorage.clear(),e&&i("library",e),location.reload()}function Le(){const e={},a=localStorage.length;for(let n=0;n<a;n++){const t=localStorage.key(n);t!=="library"&&(e[t]=l(t))}return e}function Ie(){const e=O("a");e.download="flyingdarkfox_settings.json",e.href=`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(Le(),void 0,2))}`,e.click()}async function Me(e){e.preventDefault();const a=JSON.parse(await e.target.files[0].text());if(confirm("This will merge your current settings with the imported settings, continue?")){for(const n in a)i(n,a[n]);location.reload()}}location.search==="?reset"&&(history.replaceState({},"",location.pathname),j(),U());document.getElementById("clearCacheBtn").addEventListener("click",j);document.getElementById("restoreSettingsBtn").addEventListener("click",U);document.getElementById("exportSettingsBtn").addEventListener("click",Ie);document.getElementById("importSettingsBtn").addEventListener("change",Me);G(["click"]);export{De as default};
